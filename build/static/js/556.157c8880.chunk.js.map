{"version":3,"file":"static/js/556.157c8880.chunk.js","mappings":"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","sources":["pages/AllStudents.js","components/SearchableList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport StudentProfile from \"./StudentProfile\";\r\nimport SearchableList from \"../components/SearchableList\";\r\nimport \"../components/SearchableList.css\";\r\nimport \"../components/StudentCard.css\";\r\nimport { API_BASE_URL } from \"../config/api\";\r\n\r\nexport default function AllStudents({ token }) {\r\n  const [students, setStudents] = useState([]);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    age: 8,\r\n    category: \"U10\",\r\n    centerId: \"\",\r\n    school: \"\",\r\n    parentPhoneNumber: \"\",\r\n    parentEmail: \"\",\r\n    file: null,\r\n  });\r\n  const [selected, setSelected] = useState(null);\r\n  const [centers, setCenters] = useState([]);\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetchStudents();\r\n    fetchCenters();\r\n  }, []);\r\n\r\n  async function fetchStudents() {\r\n    const res = await fetch(`${API_BASE_URL}/students`, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    });\r\n    if (!res.ok) return setStudents([]);\r\n    const data = await res.json();\r\n    setStudents(data.sort((a, b) => (a.name || \"\").localeCompare(b.name || \"\")));\r\n  }\r\n\r\n  async function fetchCenters() {\r\n    const res = await fetch(`${API_BASE_URL}/centers`, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    });\r\n    if (!res.ok) return setCenters([]);\r\n    setCenters(await res.json());\r\n  }\r\n\r\n  function validateForm() {\r\n    const errs = {};\r\n    if (!form.name || form.name.trim().length < 2) {\r\n      errs.name = \"Name is required\";\r\n    }\r\n    const ageNum = Number(form.age);\r\n    if (!Number.isFinite(ageNum) || ageNum <= 0) {\r\n      errs.age = \"Age must be a positive number\";\r\n    }\r\n    if (!form.category) {\r\n      errs.category = \"Category is required\";\r\n    }\r\n    // centerId is optional\r\n    if (\r\n      form.parentEmail &&\r\n      !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.parentEmail)\r\n    ) {\r\n      errs.parentEmail = \"Enter a valid email\";\r\n    }\r\n    if (\r\n      form.parentPhoneNumber &&\r\n      form.parentPhoneNumber.replace(/\\D/g, \"\").length < 7\r\n    ) {\r\n      errs.parentPhoneNumber = \"Enter a valid phone number\";\r\n    }\r\n    setFormErrors(errs);\r\n    return Object.keys(errs).length === 0;\r\n  }\r\n\r\n  async function createStudent(e) {\r\n    e.preventDefault();\r\n    if (!validateForm()) return;\r\n\r\n    // create base student\r\n    const res = await fetch(`${API_BASE_URL}/students`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        name: form.name,\r\n        age: Number(form.age),\r\n        category: form.category,\r\n        school: form.school || undefined,\r\n        parentPhoneNumber: form.parentPhoneNumber || undefined,\r\n        parentEmail: form.parentEmail || undefined,\r\n        center: form.centerId ? { id: Number(form.centerId) } : undefined,\r\n      }),\r\n    });\r\n\r\n    if (!res.ok) {\r\n      alert(\"Failed to create student\");\r\n      return;\r\n    }\r\n\r\n    const created = await res.json();\r\n\r\n    // if an image file was selected, upload it\r\n    if (form.file) {\r\n      // Validate file size (200KB max)\r\n      const maxFileSize = 200 * 1024; // 200KB\r\n      if (form.file.size > maxFileSize) {\r\n        console.warn(\r\n          `Image file too large (${(form.file.size / 1024).toFixed(\r\n            2\r\n          )}KB). Maximum is 200KB`\r\n        );\r\n      } else {\r\n        try {\r\n          const fd = new FormData();\r\n          fd.append(\"file\", form.file, form.file.name);\r\n\r\n          const upl = await fetch(\r\n            `${API_BASE_URL}/upload/student/${created.id}/image`,\r\n            {\r\n              method: \"POST\",\r\n              headers: {\r\n                Authorization: \"Bearer \" + token,\r\n              },\r\n              body: fd,\r\n            }\r\n          );\r\n\r\n          if (!upl.ok) {\r\n            console.warn(\"Image upload failed for student\", created.id);\r\n          }\r\n        } catch (err) {\r\n          console.warn(\"Image upload error\", err);\r\n        }\r\n      }\r\n    }\r\n\r\n    // reset form and refresh list\r\n    setForm({\r\n      name: \"\",\r\n      age: 8,\r\n      category: \"U10\",\r\n      centerId: \"\",\r\n      school: \"\",\r\n      parentPhoneNumber: \"\",\r\n      parentEmail: \"\",\r\n      file: null,\r\n    });\r\n    setShowForm(false);\r\n    fetchStudents();\r\n  }\r\n\r\n  if (selected)\r\n    return (\r\n      <div className=\"page\">\r\n        <StudentProfile\r\n          id={selected}\r\n          token={token}\r\n          onBack={() => setSelected(null)}\r\n          embed={true}\r\n        />\r\n      </div>\r\n    );\r\n\r\n  const renderStudent = (student) => (\r\n    <div\r\n      key={student.id}\r\n      className=\"student-card clickable\"\r\n      onClick={() => setSelected(student.id)}\r\n    >\r\n      <div className=\"profile-header\">\r\n        <div className=\"profile-avatar small\">\r\n          {student.imageViewUrl ||\r\n          student.imageUrl ||\r\n          (student.image\r\n            ? `${API_BASE_URL}/uploads/${student.image}`\r\n            : null) ? (\r\n            <img\r\n              src={\r\n                student.imageViewUrl ||\r\n                student.imageUrl ||\r\n                `${API_BASE_URL}/uploads/${student.image}`\r\n              }\r\n              alt={student.name}\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                objectFit: \"cover\",\r\n                borderRadius: \"50%\",\r\n              }}\r\n            />\r\n          ) : (\r\n            student.name.charAt(0)\r\n          )}\r\n        </div>\r\n        <h3>{student.name}</h3>\r\n      </div>\r\n      <div className=\"profile-info\">\r\n        <span>Age: {student.age}</span>\r\n        <span>Category: {student.category}</span>\r\n        <span>Center: {student.center?.name || \"-\"}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h2>All Students</h2>\r\n      <button\r\n        onClick={() => setShowForm((s) => !s)}\r\n        style={{ marginBottom: 10 }}\r\n        className=\"action-button\"\r\n      >\r\n        {showForm ? \"Cancel\" : \"Add Student\"}\r\n      </button>\r\n      {showForm && (\r\n        <form onSubmit={createStudent} className=\"add-form\">\r\n          <input\r\n            required\r\n            placeholder=\"Name\"\r\n            value={form.name}\r\n            onChange={(e) => setForm((f) => ({ ...f, name: e.target.value }))}\r\n          />\r\n          {formErrors.name && (\r\n            <div className=\"error\" style={{ color: \"#b00\" }}>\r\n              {formErrors.name}\r\n            </div>\r\n          )}\r\n          <input\r\n            required\r\n            placeholder=\"Age\"\r\n            type=\"number\"\r\n            value={form.age}\r\n            onChange={(e) => setForm((f) => ({ ...f, age: e.target.value }))}\r\n          />\r\n          {formErrors.age && (\r\n            <div className=\"error\" style={{ color: \"#b00\" }}>\r\n              {formErrors.age}\r\n            </div>\r\n          )}\r\n          <select\r\n            value={form.category}\r\n            onChange={(e) =>\r\n              setForm((f) => ({ ...f, category: e.target.value }))\r\n            }\r\n          >\r\n            <option value=\"U6\">U6</option>\r\n            <option value=\"U10\">U10</option>\r\n            <option value=\"U15\">U15</option>\r\n          </select>\r\n          {formErrors.category && (\r\n            <div className=\"error\" style={{ color: \"#b00\" }}>\r\n              {formErrors.category}\r\n            </div>\r\n          )}\r\n          <select\r\n            value={form.centerId}\r\n            onChange={(e) =>\r\n              setForm((f) => ({ ...f, centerId: e.target.value }))\r\n            }\r\n          >\r\n            <option value=\"\">Select Center</option>\r\n            {centers.map((c) => (\r\n              <option key={c.id} value={c.id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          <input\r\n            placeholder=\"School\"\r\n            value={form.school}\r\n            onChange={(e) => setForm((f) => ({ ...f, school: e.target.value }))}\r\n          />\r\n\r\n          <input\r\n            placeholder=\"Parent Phone Number\"\r\n            value={form.parentPhoneNumber}\r\n            onChange={(e) =>\r\n              setForm((f) => ({ ...f, parentPhoneNumber: e.target.value }))\r\n            }\r\n          />\r\n          {formErrors.parentPhoneNumber && (\r\n            <div className=\"error\" style={{ color: \"#b00\" }}>\r\n              {formErrors.parentPhoneNumber}\r\n            </div>\r\n          )}\r\n\r\n          <input\r\n            placeholder=\"Parent Email\"\r\n            type=\"email\"\r\n            value={form.parentEmail}\r\n            onChange={(e) =>\r\n              setForm((f) => ({ ...f, parentEmail: e.target.value }))\r\n            }\r\n          />\r\n          {formErrors.parentEmail && (\r\n            <div className=\"error\" style={{ color: \"#b00\" }}>\r\n              {formErrors.parentEmail}\r\n            </div>\r\n          )}\r\n\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            onChange={(e) =>\r\n              setForm((f) => ({ ...f, file: e.target.files[0] || null }))\r\n            }\r\n          />\r\n\r\n          <button type=\"submit\">Create</button>\r\n        </form>\r\n      )}\r\n\r\n      <div style={{ marginBottom: 12 }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"ðŸ” Search student by name...\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n          style={{\r\n            padding: \"8px 12px\",\r\n            fontSize: 14,\r\n            borderRadius: 4,\r\n            border: \"1px solid #ccc\",\r\n            width: \"100%\",\r\n            maxWidth: \"300px\",\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      <SearchableList\r\n        items={students.filter(\r\n          (s) =>\r\n            !searchQuery.trim() ||\r\n            s.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n        )}\r\n        onSelect={(student) => setSelected(student.id)}\r\n        renderItem={renderStudent}\r\n        searchFields={[\"name\", \"category\", \"center.name\"]}\r\n        itemsPerPage={8}\r\n        className=\"students-list\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\n\nexport default function SearchableList({\n  items,\n  onSelect,\n  renderItem,\n  searchFields = [\"name\"],\n  itemsPerPage = 10,\n  className = \"\",\n}) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n\n  // Filter items based on search term\n  const filteredItems = items.filter((item) =>\n    searchFields.some((field) =>\n      String(item[field]).toLowerCase().includes(searchTerm.toLowerCase())\n    )\n  );\n\n  // Calculate pagination\n  const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const paginatedItems = filteredItems.slice(\n    startIndex,\n    startIndex + itemsPerPage\n  );\n\n  const handlePageChange = (page) => {\n    setCurrentPage(page);\n    // Scroll to top of list\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  };\n\n  return (\n    <div className={`searchable-list ${className}`}>\n      <div className=\"search-container\">\n        <input\n          type=\"text\"\n          placeholder=\"Search...\"\n          value={searchTerm}\n          onChange={(e) => {\n            setSearchTerm(e.target.value);\n            setCurrentPage(1); // Reset to first page when searching\n          }}\n          className=\"search-input\"\n        />\n      </div>\n\n      <div className=\"list-container\">\n        {paginatedItems.length === 0 ? (\n          <div className=\"no-results\">No results found</div>\n        ) : (\n          paginatedItems.map((item) => renderItem(item))\n        )}\n      </div>\n\n      {totalPages > 1 && (\n        <div className=\"pagination\">\n          <button\n            onClick={() => handlePageChange(currentPage - 1)}\n            disabled={currentPage === 1}\n            className=\"pagination-button\"\n          >\n            Previous\n          </button>\n\n          {Array.from({ length: totalPages }, (_, i) => i + 1)\n            .filter(\n              (page) =>\n                page === 1 ||\n                page === totalPages ||\n                (page >= currentPage - 1 && page <= currentPage + 1)\n            )\n            .map((page) => (\n              <React.Fragment key={page}>\n                {page !== 1 &&\n                  page !== currentPage - 1 &&\n                  page !== currentPage + 1 &&\n                  page !== totalPages && (\n                    <span className=\"pagination-ellipsis\">...</span>\n                  )}\n                <button\n                  onClick={() => handlePageChange(page)}\n                  className={`pagination-button ${\n                    currentPage === page ? \"active\" : \"\"\n                  }`}\n                >\n                  {page}\n                </button>\n              </React.Fragment>\n            ))}\n\n          <button\n            onClick={() => handlePageChange(currentPage + 1)}\n            disabled={currentPage === totalPages}\n            className=\"pagination-button\"\n          >\n            Next\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["AllStudents","_ref","token","students","setStudents","useState","showForm","setShowForm","form","setForm","name","age","category","centerId","school","parentPhoneNumber","parentEmail","file","selected","setSelected","centers","setCenters","formErrors","setFormErrors","searchQuery","setSearchQuery","async","fetchStudents","res","fetch","concat","API_BASE_URL","headers","Authorization","ok","data","json","sort","a","b","localeCompare","useEffect","fetchCenters","_jsx","className","children","StudentProfile","id","onBack","embed","_jsxs","onClick","s","style","marginBottom","onSubmit","e","preventDefault","errs","trim","length","ageNum","Number","isFinite","test","replace","Object","keys","validateForm","method","body","JSON","stringify","undefined","center","alert","created","maxFileSize","size","console","warn","toFixed","fd","FormData","append","err","required","placeholder","value","onChange","f","_objectSpread","target","color","type","map","c","accept","files","padding","fontSize","borderRadius","border","width","maxWidth","SearchableList","items","filter","toLowerCase","includes","onSelect","student","renderItem","_student$center","imageViewUrl","imageUrl","image","src","alt","height","objectFit","charAt","searchFields","itemsPerPage","searchTerm","setSearchTerm","currentPage","setCurrentPage","filteredItems","item","some","field","String","totalPages","Math","ceil","startIndex","paginatedItems","slice","handlePageChange","page","window","scrollTo","top","behavior","disabled","Array","from","_","i","React"],"sourceRoot":""}