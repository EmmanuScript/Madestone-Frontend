"use strict";(self.webpackChunkmadestone_frontend=self.webpackChunkmadestone_frontend||[]).push([[924],{709:()=>{},734:()=>{},740:()=>{},924:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var n=s(555),r=s(43),t=s(481),i=s(307),o=s(705),c=s(42),d=s(725),l=(s(740),s(709),s(734),s(579));function u(e){let{token:a}=e;const[s,u]=(0,r.useState)([]),[m,h]=(0,r.useState)([]),[p,v]=(0,r.useState)(!1),[j,f]=(0,r.useState)({name:"",username:"",password:"",centerId:""}),[x,w]=(0,r.useState)(null),[g,y]=(0,r.useState)({isOpen:!1,type:"",data:null}),{toasts:A,success:b,error:C,removeToast:N}=(0,d.d)(),[k,S]=(0,r.useState)({});async function I(){const e=await fetch("".concat(t.JR,"/users/admins"),{headers:{Authorization:"Bearer "+a}});if(!e.ok)return u([]);const s=await e.json();u(s.sort((e,a)=>(e.name||"").localeCompare(a.name||"")))}if((0,r.useEffect)(()=>{I(),async function(){const e=await fetch("".concat(t.JR,"/centers"),{headers:{Authorization:"Bearer "+a}});if(!e.ok)return h([]);h(await e.json())}()},[]),x)return(0,l.jsx)("div",{children:(0,l.jsx)(i.A,{id:x,token:a,onBack:()=>w(null),embed:!0})});return(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Admins"}),(0,l.jsx)("button",{onClick:()=>v(e=>!e),className:"action-button",children:p?"Cancel":"Add Admin"}),p&&(0,l.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),function(){const e={};return(!j.name||j.name.trim().length<2)&&(e.name="Name is required"),(!j.username||j.username.trim().length<3)&&(e.username="Username is required"),(!j.password||j.password.length<4)&&(e.password="Password must be at least 4 characters"),S(e),0===Object.keys(e).length}())try{if(!(await fetch("".concat(t.JR,"/users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify({name:j.name,username:j.username,password:j.password,role:"ADMIN",center:j.centerId?{id:Number(j.centerId)}:void 0,active:!0})})).ok)throw new Error("Failed to create admin");f({name:"",username:"",password:"",centerId:""}),v(!1),await I(),b("Admin created successfully!")}catch(s){C("Failed to create admin. Please try again.")}},className:"add-form",children:[(0,l.jsx)("input",{required:!0,placeholder:"Name",value:j.name,onChange:e=>f(a=>(0,n.A)((0,n.A)({},a),{},{name:e.target.value}))}),k.name&&(0,l.jsx)("div",{className:"error",style:{color:"#b00"},children:k.name}),(0,l.jsx)("input",{required:!0,placeholder:"Username",value:j.username,onChange:e=>f(a=>(0,n.A)((0,n.A)({},a),{},{username:e.target.value}))}),k.username&&(0,l.jsx)("div",{className:"error",style:{color:"#b00"},children:k.username}),(0,l.jsx)("input",{required:!0,placeholder:"Password",type:"password",value:j.password,onChange:e=>f(a=>(0,n.A)((0,n.A)({},a),{},{password:e.target.value}))}),k.password&&(0,l.jsx)("div",{className:"error",style:{color:"#b00"},children:k.password}),(0,l.jsxs)("select",{value:j.centerId,onChange:e=>f(a=>(0,n.A)((0,n.A)({},a),{},{centerId:e.target.value})),children:[(0,l.jsx)("option",{value:"",children:"Select Center"}),m.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,l.jsx)("button",{type:"submit",children:"Create"})]}),(0,l.jsx)("div",{className:"admins-list-vertical",children:s.map(e=>{var a;return(0,l.jsxs)("div",{className:"admin-box card-vertical",children:[(0,l.jsxs)("div",{className:"coach-left",children:[(0,l.jsx)("div",{className:"coach-avatar",children:e.name.charAt(0)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:e.name}),(0,l.jsx)("div",{className:"muted",children:(null===(a=e.center)||void 0===a?void 0:a.name)||"No center"})]})]}),(0,l.jsx)("div",{className:"coach-right",children:(0,l.jsx)("button",{onClick:()=>w(e.id),children:"View"})})]},e.id)})}),g.isOpen&&(0,l.jsx)(o.A,{title:g.title,message:g.message,onConfirm:()=>{g.onConfirm(),y({isOpen:!1,type:"",data:null})},onCancel:()=>y({isOpen:!1,type:"",data:null})}),A.map(e=>(0,l.jsx)(c.A,{message:e.message,type:e.type,onClose:()=>N(e.id)},e.id))]})}}}]);
//# sourceMappingURL=924.95c4ed5b.chunk.js.map