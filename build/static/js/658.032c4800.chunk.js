"use strict";(self.webpackChunkmadestone_frontend=self.webpackChunkmadestone_frontend||[]).push([[658],{658:(e,n,t)=>{t.r(n),t.d(n,{default:()=>c});var r=t(43),i=t(481),a=t(579);function c(e){let{token:n,onStudentClick:t,onCoachClick:c,onAdminClick:s,readOnly:o=!1}=e;const[d,l]=(0,r.useState)([]),[h,u]=(0,r.useState)(""),[j,x]=(0,r.useState)(null),[m,k]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[C,b]=(0,r.useState)([]);async function v(){const e=await fetch("".concat(i.JR,"/centers"),{headers:{Authorization:"Bearer "+n}});if(!e.ok)return l([]);const t=await e.json();l(t.sort((e,n)=>(e.name||"").localeCompare(n.name||"")))}return(0,r.useEffect)(()=>{v()},[]),j?(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>x(null),children:"Back"}),(0,a.jsx)("h3",{children:"Center Details"}),(0,a.jsx)("div",{children:(0,a.jsx)("b",{children:"Students"})}),(0,a.jsx)("ul",{children:m.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>t&&t(e.id),style:{background:"none",border:"none",padding:0,margin:0,color:"#2a7",textDecoration:"underline",cursor:"pointer"},children:e.name})},e.id))}),(0,a.jsx)("div",{children:(0,a.jsx)("b",{children:"Coaches"})}),(0,a.jsx)("ul",{children:f.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>c&&c(e.id),style:{background:"none",border:"none",padding:0,margin:0,color:"#2a7",textDecoration:"underline",cursor:"pointer"},children:e.name})},e.id))}),(0,a.jsx)("div",{children:(0,a.jsx)("b",{children:"Admins"})}),(0,a.jsx)("ul",{children:C.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>s&&s(e.id),style:{background:"none",border:"none",padding:0,margin:0,color:"#2a7",textDecoration:"underline",cursor:"pointer"},children:e.name})},e.id))})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Centers"}),!o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{placeholder:"New center name",value:h,onChange:e=>u(e.target.value)}),(0,a.jsx)("button",{onClick:async function(){await fetch("".concat(i.JR,"/centers"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify({name:h})}),u(""),v()},children:"Create Center"})]}),(0,a.jsx)("div",{className:"centers-list-vertical",children:d.map(e=>(0,a.jsxs)("div",{className:"center-box card-vertical",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:e.name}),(0,a.jsx)("div",{className:"muted",children:e.address})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:()=>async function(e){x(e);const t=await fetch("".concat(i.JR,"/centers/").concat(e,"/students"),{headers:{Authorization:"Bearer "+n}}),r=t.ok?await t.json():[];k(r);const a=await fetch("".concat(i.JR,"/users/coaches"),{headers:{Authorization:"Bearer "+n}}),c=a.ok?await a.json():[];p(c.filter(n=>n.center&&n.center.id===e));const s=await fetch("".concat(i.JR,"/users/admins"),{headers:{Authorization:"Bearer "+n}}),o=s.ok?await s.json():[];b(o.filter(n=>n.center&&n.center.id===e))}(e.id),children:"Open"})})]},e.id))})]})}}}]);
//# sourceMappingURL=658.032c4800.chunk.js.map