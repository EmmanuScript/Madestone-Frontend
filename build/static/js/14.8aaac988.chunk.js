"use strict";(self.webpackChunkmadestone_frontend=self.webpackChunkmadestone_frontend||[]).push([[14],{14:(e,a,s)=>{s.r(a),s.d(a,{default:()=>l});var t=s(555),n=s(43),r=s(481),c=s(920),i=(s(689),s(705),s(42),s(725)),o=(s(740),s(709),s(734),s(579));function l(e){let{token:a,readOnly:s=!1}=e;const[l,d]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[m,p]=(0,n.useState)(!1),[v,j]=(0,n.useState)({name:"",username:"",password:"",centerId:""}),[x,f]=(0,n.useState)(null),[N,b]=(0,n.useState)({isOpen:!1,type:"",data:null}),{toasts:g,success:w,error:C,removeToast:y}=(0,i.d)(),[A,k]=(0,n.useState)({});async function S(){const e=await fetch("".concat(r.JR,"/users/coaches"),{headers:{Authorization:"Bearer "+a}});if(!e.ok)return d([]);const s=await e.json();d(s.sort((e,a)=>(e.name||"").localeCompare(a.name||"")))}if((0,n.useEffect)(()=>{S(),async function(){const e=await fetch("".concat(r.JR,"/centers"),{headers:{Authorization:"Bearer "+a}});if(!e.ok)return h([]);h(await e.json())}()},[]),x)return(0,o.jsx)("div",{children:(0,o.jsx)(c.A,{id:x,token:a,onBack:()=>f(null),embed:!0})});return(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{children:"Coaches"}),!s&&(0,o.jsx)("button",{onClick:()=>p(e=>!e),className:"action-button",children:m?"Cancel":"Add Coach"}),m&&!s&&(0,o.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),function(){const e={};return(!v.name||v.name.trim().length<2)&&(e.name="Name is required"),(!v.username||v.username.trim().length<3)&&(e.username="Username is required"),(!v.password||v.password.length<4)&&(e.password="Password must be at least 4 characters"),k(e),0===Object.keys(e).length}())try{if(!(await fetch("".concat(r.JR,"/users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify({name:v.name,username:v.username,password:v.password,role:"COACH",center:v.centerId?{id:Number(v.centerId)}:void 0,active:!0})})).ok)throw new Error("Failed to create coach");j({name:"",username:"",password:"",centerId:""}),p(!1),await S(),w("Coach created successfully!")}catch(s){C("Failed to create coach. Please try again.")}},className:"add-form",children:[(0,o.jsx)("input",{required:!0,placeholder:"Name",value:v.name,onChange:e=>j(a=>(0,t.A)((0,t.A)({},a),{},{name:e.target.value}))}),A.name&&(0,o.jsx)("div",{className:"error",style:{color:"#b00"},children:A.name}),(0,o.jsx)("input",{required:!0,placeholder:"Username",value:v.username,onChange:e=>j(a=>(0,t.A)((0,t.A)({},a),{},{username:e.target.value}))}),A.username&&(0,o.jsx)("div",{className:"error",style:{color:"#b00"},children:A.username}),(0,o.jsx)("input",{required:!0,placeholder:"Password",type:"password",value:v.password,onChange:e=>j(a=>(0,t.A)((0,t.A)({},a),{},{password:e.target.value}))}),A.password&&(0,o.jsx)("div",{className:"error",style:{color:"#b00"},children:A.password}),(0,o.jsxs)("select",{value:v.centerId,onChange:e=>j(a=>(0,t.A)((0,t.A)({},a),{},{centerId:e.target.value})),children:[(0,o.jsx)("option",{value:"",children:"Select Center"}),u.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,o.jsx)("button",{type:"submit",children:"Create"})]}),(0,o.jsx)("div",{className:"coaches-list-vertical",children:l.map(e=>{var a;return(0,o.jsxs)("div",{className:"coach-box card-vertical",children:[(0,o.jsxs)("div",{className:"coach-left",children:[(0,o.jsx)("div",{className:"coach-avatar",children:e.name.charAt(0)}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:e.name}),(0,o.jsxs)("div",{className:"muted",children:["Center: ",(null===(a=e.center)||void 0===a?void 0:a.name)||"No center"]}),e.birthMonthDay&&(0,o.jsxs)("div",{className:"muted",children:["DOB: ",e.birthMonthDay]})]})]}),(0,o.jsx)("div",{className:"coach-right",children:(0,o.jsx)("button",{onClick:()=>f(e.id),children:"View"})})]},e.id)})})]})}},689:(e,a,s)=>{s.d(a,{A:()=>r});var t=s(43),n=s(579);function r(e){let{items:a,onSelect:s,renderItem:r,searchFields:c=["name"],itemsPerPage:i=10,className:o=""}=e;const[l,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(1),m=a.filter(e=>c.some(a=>String(e[a]).toLowerCase().includes(l.toLowerCase()))),p=Math.ceil(m.length/i),v=(u-1)*i,j=m.slice(v,v+i),x=e=>{h(e),window.scrollTo({top:0,behavior:"smooth"})};return(0,n.jsxs)("div",{className:"searchable-list ".concat(o),children:[(0,n.jsx)("div",{className:"search-container",children:(0,n.jsx)("input",{type:"text",placeholder:"Search...",value:l,onChange:e=>{d(e.target.value),h(1)},className:"search-input"})}),(0,n.jsx)("div",{className:"list-container",children:0===j.length?(0,n.jsx)("div",{className:"no-results",children:"No results found"}):j.map(e=>r(e))}),p>1&&(0,n.jsxs)("div",{className:"pagination",children:[(0,n.jsx)("button",{onClick:()=>x(u-1),disabled:1===u,className:"pagination-button",children:"Previous"}),Array.from({length:p},(e,a)=>a+1).filter(e=>1===e||e===p||e>=u-1&&e<=u+1).map(e=>(0,n.jsxs)(t.Fragment,{children:[1!==e&&e!==u-1&&e!==u+1&&e!==p&&(0,n.jsx)("span",{className:"pagination-ellipsis",children:"..."}),(0,n.jsx)("button",{onClick:()=>x(e),className:"pagination-button ".concat(u===e?"active":""),children:e})]},e)),(0,n.jsx)("button",{onClick:()=>x(u+1),disabled:u===p,className:"pagination-button",children:"Next"})]})]})}},709:()=>{},734:()=>{},740:()=>{}}]);
//# sourceMappingURL=14.8aaac988.chunk.js.map