{"version":3,"file":"static/js/924.95c4ed5b.chunk.js","mappings":"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","sources":["pages/AdminsAdmin.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { API_BASE_URL } from \"../config/api\";\nimport AdminProfile from \"./AdminProfile\";\nimport Dialog from \"../components/Dialog\";\nimport Toast from \"../components/Toast\";\nimport { useToast } from \"../hooks/useToast\";\nimport \"../components/SearchableList.css\";\nimport \"../components/StudentCard.css\";\nimport \"../components/CoachCard.css\";\n\nexport default function AdminsAdmin({ token }) {\n  const [admins, setAdmins] = useState([]);\n  const [centers, setCenters] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n  const [form, setForm] = useState({\n    name: \"\",\n    username: \"\",\n    password: \"\",\n    centerId: \"\",\n  });\n  const [selected, setSelected] = useState(null);\n  const [dialog, setDialog] = useState({ isOpen: false, type: \"\", data: null });\n  const { toasts, success, error, removeToast } = useToast();\n  const [formErrors, setFormErrors] = useState({});\n\n  useEffect(() => {\n    fetchAdmins();\n    fetchCenters();\n  }, []);\n\n  async function fetchAdmins() {\n    const res = await fetch(`${API_BASE_URL}/users/admins`, {\n      headers: { Authorization: \"Bearer \" + token },\n    });\n    if (!res.ok) return setAdmins([]);\n    const data = await res.json();\n    setAdmins(data.sort((a, b) => (a.name || \"\").localeCompare(b.name || \"\")));\n  }\n\n  async function fetchCenters() {\n    const res = await fetch(`${API_BASE_URL}/centers`, {\n      headers: { Authorization: \"Bearer \" + token },\n    });\n    if (!res.ok) return setCenters([]);\n    setCenters(await res.json());\n  }\n\n  function validateForm() {\n    const errs = {};\n    if (!form.name || form.name.trim().length < 2) {\n      errs.name = \"Name is required\";\n    }\n    if (!form.username || form.username.trim().length < 3) {\n      errs.username = \"Username is required\";\n    }\n    if (!form.password || form.password.length < 4) {\n      errs.password = \"Password must be at least 4 characters\";\n    }\n    setFormErrors(errs);\n    return Object.keys(errs).length === 0;\n  }\n\n  async function createAdmin(e) {\n    e.preventDefault();\n    if (!validateForm()) return;\n    try {\n      const response = await fetch(`${API_BASE_URL}/users`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + token,\n        },\n        body: JSON.stringify({\n          name: form.name,\n          username: form.username,\n          password: form.password,\n          role: \"ADMIN\",\n          center: form.centerId ? { id: Number(form.centerId) } : undefined,\n          active: true,\n        }),\n      });\n\n      if (!response.ok) throw new Error(\"Failed to create admin\");\n\n      setForm({ name: \"\", username: \"\", password: \"\", centerId: \"\" });\n      setShowForm(false);\n      await fetchAdmins();\n      success(\"Admin created successfully!\");\n    } catch (err) {\n      error(\"Failed to create admin. Please try again.\");\n    }\n  }\n\n  if (selected)\n    return (\n      <div>\n        <AdminProfile\n          id={selected}\n          token={token}\n          onBack={() => setSelected(null)}\n          embed={true}\n        />\n      </div>\n    );\n\n  const handleToggleActive = async (admin) => {\n    setDialog({\n      isOpen: true,\n      type: \"confirm\",\n      data: admin,\n      title: `${admin.active ? \"Deactivate\" : \"Activate\"} Admin`,\n      message: `Are you sure you want to ${\n        admin.active ? \"deactivate\" : \"activate\"\n      } ${admin.name}?`,\n      onConfirm: async () => {\n        await fetch(`${API_BASE_URL}/users/${admin.id}/active`, {\n          method: \"PATCH\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify({ active: !admin.active }),\n        });\n        fetchAdmins();\n      },\n    });\n  };\n\n  return (\n    <div>\n      <h2>Admins</h2>\n      <button onClick={() => setShowForm((s) => !s)} className=\"action-button\">\n        {showForm ? \"Cancel\" : \"Add Admin\"}\n      </button>\n      {showForm && (\n        <form onSubmit={createAdmin} className=\"add-form\">\n          <input\n            required\n            placeholder=\"Name\"\n            value={form.name}\n            onChange={(e) => setForm((f) => ({ ...f, name: e.target.value }))}\n          />\n          {formErrors.name && (\n            <div className=\"error\" style={{ color: \"#b00\" }}>\n              {formErrors.name}\n            </div>\n          )}\n          <input\n            required\n            placeholder=\"Username\"\n            value={form.username}\n            onChange={(e) =>\n              setForm((f) => ({ ...f, username: e.target.value }))\n            }\n          />\n          {formErrors.username && (\n            <div className=\"error\" style={{ color: \"#b00\" }}>\n              {formErrors.username}\n            </div>\n          )}\n          <input\n            required\n            placeholder=\"Password\"\n            type=\"password\"\n            value={form.password}\n            onChange={(e) =>\n              setForm((f) => ({ ...f, password: e.target.value }))\n            }\n          />\n          {formErrors.password && (\n            <div className=\"error\" style={{ color: \"#b00\" }}>\n              {formErrors.password}\n            </div>\n          )}\n          <select\n            value={form.centerId}\n            onChange={(e) =>\n              setForm((f) => ({ ...f, centerId: e.target.value }))\n            }\n          >\n            <option value=\"\">Select Center</option>\n            {centers.map((c) => (\n              <option key={c.id} value={c.id}>\n                {c.name}\n              </option>\n            ))}\n          </select>\n          <button type=\"submit\">Create</button>\n        </form>\n      )}\n\n      <div className=\"admins-list-vertical\">\n        {admins.map((admin) => (\n          <div key={admin.id} className=\"admin-box card-vertical\">\n            <div className=\"coach-left\">\n              <div className=\"coach-avatar\">{admin.name.charAt(0)}</div>\n              <div>\n                <strong>{admin.name}</strong>\n                <div className=\"muted\">{admin.center?.name || \"No center\"}</div>\n              </div>\n            </div>\n            <div className=\"coach-right\">\n              <button onClick={() => setSelected(admin.id)}>View</button>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {dialog.isOpen && (\n        <Dialog\n          title={dialog.title}\n          message={dialog.message}\n          onConfirm={() => {\n            dialog.onConfirm();\n            setDialog({ isOpen: false, type: \"\", data: null });\n          }}\n          onCancel={() => setDialog({ isOpen: false, type: \"\", data: null })}\n        />\n      )}\n\n      {toasts.map((toast) => (\n        <Toast\n          key={toast.id}\n          message={toast.message}\n          type={toast.type}\n          onClose={() => removeToast(toast.id)}\n        />\n      ))}\n    </div>\n  );\n}\n"],"names":["AdminsAdmin","_ref","token","admins","setAdmins","useState","centers","setCenters","showForm","setShowForm","form","setForm","name","username","password","centerId","selected","setSelected","dialog","setDialog","isOpen","type","data","toasts","success","error","removeToast","useToast","formErrors","setFormErrors","async","fetchAdmins","res","fetch","concat","API_BASE_URL","headers","Authorization","ok","json","sort","a","b","localeCompare","useEffect","fetchCenters","_jsx","children","AdminProfile","id","onBack","embed","_jsxs","onClick","s","className","onSubmit","e","preventDefault","errs","trim","length","Object","keys","validateForm","method","body","JSON","stringify","role","center","Number","undefined","active","Error","err","required","placeholder","value","onChange","f","_objectSpread","target","style","color","map","c","admin","_admin$center","charAt","Dialog","title","message","onConfirm","onCancel","toast","Toast","onClose"],"sourceRoot":""}