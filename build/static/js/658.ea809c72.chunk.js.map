{"version":3,"file":"static/js/658.ea809c72.chunk.js","mappings":"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","sources":["pages/CentersAdmin.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nexport default function CentersAdmin({ token }) {\r\n  const [centers, setCenters] = useState([]);\r\n  const [name, setName] = useState(\"\");\r\n  const [selected, setSelected] = useState(null);\r\n  const [students, setStudents] = useState([]);\r\n  const [coaches, setCoaches] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchCenters();\r\n  }, []);\r\n\r\n  async function fetchCenters() {\r\n    const res = await fetch(\"http://localhost:3001/centers\", {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    });\r\n    if (!res.ok) return setCenters([]);\r\n    setCenters(await res.json());\r\n  }\r\n\r\n  async function createCenter() {\r\n    await fetch(\"http://localhost:3001/centers\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({ name }),\r\n    });\r\n    setName(\"\");\r\n    fetchCenters();\r\n  }\r\n\r\n  async function openCenter(id) {\r\n    setSelected(id);\r\n    const sres = await fetch(`http://localhost:3001/centers/${id}/students`, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    });\r\n    const studs = sres.ok ? await sres.json() : [];\r\n    setStudents(studs);\r\n    const cres = await fetch(`http://localhost:3001/users/coaches`, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    });\r\n    const allcoaches = cres.ok ? await cres.json() : [];\r\n    setCoaches(allcoaches.filter((c) => c.center && c.center.id === id));\r\n  }\r\n\r\n  if (selected)\r\n    return (\r\n      <div className=\"page\">\r\n        <div className=\"card\">\r\n          <button onClick={() => setSelected(null)}>Back</button>\r\n          <h3>Center Details</h3>\r\n          <div>\r\n            <b>Students</b>\r\n          </div>\r\n          <ul>\r\n            {students.map((s) => (\r\n              <li key={s.id}>{s.name}</li>\r\n            ))}\r\n          </ul>\r\n          <div>\r\n            <b>Coaches</b>\r\n          </div>\r\n          <ul>\r\n            {coaches.map((c) => (\r\n              <li key={c.id}>{c.name}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"page admin-page\">\r\n      <div className=\"card\">\r\n        <h2>Centers</h2>\r\n        <input\r\n          placeholder=\"New center name\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        <button onClick={createCenter}>Create Center</button>\r\n        <div className=\"list-grid\">\r\n          {centers.map((c) => (\r\n            <div key={c.id} className=\"center-box card-small\">\r\n              <div>\r\n                <strong>{c.name}</strong>\r\n                <div className=\"muted\">{c.address}</div>\r\n              </div>\r\n              <div>\r\n                <button onClick={() => openCenter(c.id)}>Open</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CentersAdmin","_ref","token","centers","setCenters","useState","name","setName","selected","setSelected","students","setStudents","coaches","setCoaches","async","fetchCenters","res","fetch","headers","Authorization","ok","json","useEffect","_jsx","className","children","_jsxs","onClick","map","s","id","c","placeholder","value","onChange","e","target","method","body","JSON","stringify","address","sres","concat","studs","cres","allcoaches","filter","center","openCenter"],"sourceRoot":""}