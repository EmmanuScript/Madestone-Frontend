{"version":3,"file":"static/js/610.09ad5b4e.chunk.js","mappings":"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","sources":["pages/CoachesAdmin.js","components/SearchableList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport CoachProfile from \"./CoachProfile\";\r\nimport SearchableList from \"../components/SearchableList\";\r\nimport Dialog from \"../components/Dialog\";\r\nimport Toast from \"../components/Toast\";\r\nimport { useToast } from \"../hooks/useToast\";\r\nimport \"../components/SearchableList.css\";\r\nimport \"../components/StudentCard.css\";\r\nimport \"../components/CoachCard.css\";\r\n\r\nexport default function CoachesAdmin({ token }) {\r\n  const [coaches, setCoaches] = useState([]);\r\n  const [centers, setCenters] = useState([]);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    username: \"\",\r\n    password: \"\",\r\n    centerId: \"\",\r\n  });\r\n  const [selected, setSelected] = useState(null);\r\n  const [dialog, setDialog] = useState({ isOpen: false, type: \"\", data: null });\r\n  const { toasts, success, error, removeToast } = useToast();\r\n\r\n  useEffect(() => {\r\n    fetchCoaches();\r\n    fetchCenters();\r\n  }, []);\r\n\r\n  async function fetchCoaches() {\r\n    const res = await fetch(\"http://localhost:3001/users/coaches\", {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    });\r\n    if (!res.ok) return setCoaches([]);\r\n    setCoaches(await res.json());\r\n  }\r\n  async function fetchCenters() {\r\n    const res = await fetch(\"http://localhost:3001/centers\", {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    });\r\n    if (!res.ok) return setCenters([]);\r\n    setCenters(await res.json());\r\n  }\r\n\r\n  async function createCoach(e) {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await fetch(\"http://localhost:3001/users\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        },\r\n        body: JSON.stringify({\r\n          name: form.name,\r\n          username: form.username,\r\n          password: form.password,\r\n          role: \"COACH\",\r\n          center: form.centerId ? { id: Number(form.centerId) } : undefined,\r\n          active: true,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) throw new Error(\"Failed to create coach\");\r\n\r\n      setForm({ name: \"\", username: \"\", password: \"\", centerId: \"\" });\r\n      setShowForm(false);\r\n      await fetchCoaches();\r\n      success(\"Coach created successfully!\");\r\n    } catch (err) {\r\n      error(\"Failed to create coach. Please try again.\");\r\n    }\r\n  }\r\n\r\n  if (selected)\r\n    return (\r\n      <div className=\"page\">\r\n        <div className=\"card\">\r\n          <button onClick={() => setSelected(null)}>Back</button>\r\n          <CoachProfile\r\n            id={selected}\r\n            token={token}\r\n            onBack={() => setSelected(null)}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n  const handleToggleActive = async (coach) => {\r\n    setDialog({\r\n      isOpen: true,\r\n      type: \"confirm\",\r\n      data: coach,\r\n      title: `${coach.active ? \"Deactivate\" : \"Activate\"} Coach`,\r\n      message: `Are you sure you want to ${\r\n        coach.active ? \"deactivate\" : \"activate\"\r\n      } ${coach.name}?`,\r\n      onConfirm: async () => {\r\n        await fetch(`http://localhost:3001/users/${coach.id}/active`, {\r\n          method: \"PATCH\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify({ active: !coach.active }),\r\n        });\r\n        fetchCoaches();\r\n      },\r\n    });\r\n  };\r\n\r\n  const renderCoach = (coach) => (\r\n    <div key={coach.id} className=\"student-card coach-card clickable\">\r\n      <div className=\"profile-header\">\r\n        <div className=\"profile-avatar small\">\r\n          {coach.image ? (\r\n            <img\r\n              src={`http://localhost:3001/uploads/${coach.image}`}\r\n              alt={coach.name}\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                objectFit: \"cover\",\r\n                borderRadius: \"50%\",\r\n              }}\r\n            />\r\n          ) : (\r\n            coach.name.charAt(0)\r\n          )}\r\n        </div>\r\n        <h3>{coach.name}</h3>\r\n        <div className={`status-badge ${coach.active ? \"active\" : \"inactive\"}`}>\r\n          {coach.active ? \"Active\" : \"Inactive\"}\r\n        </div>\r\n      </div>\r\n      <div className=\"profile-info\">\r\n        <span>Username: {coach.username}</span>\r\n        <span>Center: {coach.center?.name || \"-\"}</span>\r\n      </div>\r\n      <div className=\"card-actions\">\r\n        <button onClick={() => setSelected(coach.id)} className=\"action-button\">\r\n          View Profile\r\n        </button>\r\n        <button\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            handleToggleActive(coach);\r\n          }}\r\n          className={`action-button ${coach.active ? \"danger\" : \"success\"}`}\r\n        >\r\n          {coach.active ? \"Deactivate\" : \"Activate\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"page admin-page\">\r\n      <div className=\"card\">\r\n        <h2>Coaches</h2>\r\n        <button\r\n          onClick={() => setShowForm((s) => !s)}\r\n          className=\"action-button\"\r\n        >\r\n          {showForm ? \"Cancel\" : \"Add Coach\"}\r\n        </button>\r\n        {showForm && (\r\n          <form onSubmit={createCoach} className=\"add-form\">\r\n            <input\r\n              required\r\n              placeholder=\"Name\"\r\n              value={form.name}\r\n              onChange={(e) => setForm((f) => ({ ...f, name: e.target.value }))}\r\n            />\r\n            <input\r\n              required\r\n              placeholder=\"Username\"\r\n              value={form.username}\r\n              onChange={(e) =>\r\n                setForm((f) => ({ ...f, username: e.target.value }))\r\n              }\r\n            />\r\n            <input\r\n              required\r\n              placeholder=\"Password\"\r\n              type=\"password\"\r\n              value={form.password}\r\n              onChange={(e) =>\r\n                setForm((f) => ({ ...f, password: e.target.value }))\r\n              }\r\n            />\r\n            <select\r\n              value={form.centerId}\r\n              onChange={(e) =>\r\n                setForm((f) => ({ ...f, centerId: e.target.value }))\r\n              }\r\n            >\r\n              <option value=\"\">Select Center</option>\r\n              {centers.map((c) => (\r\n                <option key={c.id} value={c.id}>\r\n                  {c.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <button type=\"submit\">Create</button>\r\n          </form>\r\n        )}\r\n\r\n        <div className=\"list-grid\">\r\n          {coaches.map((co) => (\r\n            <div key={co.id} className=\"coach-box card-small\">\r\n              <div className=\"coach-left\">\r\n                <div className=\"coach-avatar\">{co.name.charAt(0)}</div>\r\n                <div>\r\n                  <strong>{co.name}</strong>\r\n                  <div className=\"muted\">{co.center?.name || \"No center\"}</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"coach-right\">\r\n                <button onClick={() => setSelected(co.id)}>View</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nexport default function SearchableList({\r\n  items,\r\n  onSelect,\r\n  renderItem,\r\n  searchFields = [\"name\"],\r\n  itemsPerPage = 10,\r\n  className = \"\",\r\n}) {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n\r\n  // Filter items based on search term\r\n  const filteredItems = items.filter((item) =>\r\n    searchFields.some((field) =>\r\n      String(item[field]).toLowerCase().includes(searchTerm.toLowerCase())\r\n    )\r\n  );\r\n\r\n  // Calculate pagination\r\n  const totalPages = Math.ceil(filteredItems.length / itemsPerPage);\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const paginatedItems = filteredItems.slice(\r\n    startIndex,\r\n    startIndex + itemsPerPage\r\n  );\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n    // Scroll to top of list\r\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n  };\r\n\r\n  return (\r\n    <div className={`searchable-list ${className}`}>\r\n      <div className=\"search-container\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search...\"\r\n          value={searchTerm}\r\n          onChange={(e) => {\r\n            setSearchTerm(e.target.value);\r\n            setCurrentPage(1); // Reset to first page when searching\r\n          }}\r\n          className=\"search-input\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"list-container\">\r\n        {paginatedItems.length === 0 ? (\r\n          <div className=\"no-results\">No results found</div>\r\n        ) : (\r\n          paginatedItems.map((item) => renderItem(item))\r\n        )}\r\n      </div>\r\n\r\n      {totalPages > 1 && (\r\n        <div className=\"pagination\">\r\n          <button\r\n            onClick={() => handlePageChange(currentPage - 1)}\r\n            disabled={currentPage === 1}\r\n            className=\"pagination-button\"\r\n          >\r\n            Previous\r\n          </button>\r\n\r\n          {Array.from({ length: totalPages }, (_, i) => i + 1)\r\n            .filter(\r\n              (page) =>\r\n                page === 1 ||\r\n                page === totalPages ||\r\n                (page >= currentPage - 1 && page <= currentPage + 1)\r\n            )\r\n            .map((page) => (\r\n              <React.Fragment key={page}>\r\n                {page !== 1 &&\r\n                  page !== currentPage - 1 &&\r\n                  page !== currentPage + 1 &&\r\n                  page !== totalPages && (\r\n                    <span className=\"pagination-ellipsis\">...</span>\r\n                  )}\r\n                <button\r\n                  onClick={() => handlePageChange(page)}\r\n                  className={`pagination-button ${\r\n                    currentPage === page ? \"active\" : \"\"\r\n                  }`}\r\n                >\r\n                  {page}\r\n                </button>\r\n              </React.Fragment>\r\n            ))}\r\n\r\n          <button\r\n            onClick={() => handlePageChange(currentPage + 1)}\r\n            disabled={currentPage === totalPages}\r\n            className=\"pagination-button\"\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CoachesAdmin","_ref","token","coaches","setCoaches","useState","centers","setCenters","showForm","setShowForm","form","setForm","name","username","password","centerId","selected","setSelected","dialog","setDialog","isOpen","type","data","toasts","success","error","removeToast","useToast","async","fetchCoaches","res","fetch","headers","Authorization","ok","json","useEffect","fetchCenters","_jsx","className","children","_jsxs","onClick","CoachProfile","id","onBack","s","onSubmit","e","preventDefault","method","body","JSON","stringify","role","center","Number","undefined","active","Error","err","required","placeholder","value","onChange","f","_objectSpread","target","map","c","co","_co$center","charAt","SearchableList","items","onSelect","renderItem","searchFields","itemsPerPage","searchTerm","setSearchTerm","currentPage","setCurrentPage","filteredItems","filter","item","some","field","String","toLowerCase","includes","totalPages","Math","ceil","length","startIndex","paginatedItems","slice","handlePageChange","page","window","scrollTo","top","behavior","concat","disabled","Array","from","_","i","React"],"sourceRoot":""}