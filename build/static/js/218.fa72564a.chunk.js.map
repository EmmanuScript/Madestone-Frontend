{"version":3,"file":"static/js/218.fa72564a.chunk.js","mappings":"kLAGe,SAASA,EAAcC,GAA6B,IAA5B,MAAEC,EAAK,OAAEC,EAAM,OAAEC,GAAQH,EAC9D,MAAOI,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,KAClCC,EAAYC,IAAiBF,EAAAA,EAAAA,UAAS,IAuC7C,OArCAG,EAAAA,EAAAA,WAAU,MAIVC,iBACE,IAAIC,EAAMT,EACV,IAAKS,GAAOV,EACV,IAEEU,EADgBC,KAAKC,MAAMC,KAAKb,EAAMc,MAAM,KAAK,KACnCC,GAChB,CAAE,MAAOC,GACP,CAGJ,IAAKN,EAAK,OACV,IAAK,IAADO,EAAAC,EACF,MAAMC,QAAaC,MAAM,GAADC,OAAIC,EAAAA,GAAY,WAAAD,OAAUX,GAAO,CACvDa,QAAS,CAAEC,cAAe,UAAYxB,KAExC,IAAKmB,EAAKM,GAAI,MAAM,IAAIC,MAAM,uBAC9B,MAAMC,QAAaR,EAAKS,OAClBC,EAAiB,QAAdZ,EAAGU,EAAKG,cAAM,IAAAb,OAAA,EAAXA,EAAac,GAEzB,GADAxB,GAAyB,QAAXW,EAAAS,EAAKG,cAAM,IAAAZ,OAAA,EAAXA,EAAac,OAAQ,KAC9BH,EAAK,OAAOzB,EAAY,IAE7B,MAAM6B,QAAab,MAAM,GAADC,OAAIC,EAAAA,GAAY,aAAAD,OAAYQ,EAAG,aAAa,CAClEN,QAAS,CAAEC,cAAe,UAAYxB,KAExC,IAAKiC,EAAKR,GAAI,OAAOrB,EAAY,IACjC,MAAM8B,QAAYD,EAAKL,OACvBxB,EAAY8B,EACd,CAAE,MAAOlB,GACPmB,QAAQC,MAAMpB,GACdZ,EAAY,GACd,CACF,CAlCEiC,IACC,CAACpC,KAoCFqC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMC,UACnBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,UAAQI,MAAO,CAAEC,MAAO,SAAWC,QAAS1C,EAAOsC,SAAC,UAGpDC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,mBAAiBlC,EAAU,KAAAe,OAAQf,GAAe,OACtDmC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,WAAUC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAAE,UACEC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,UACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,SACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,cACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,UACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,cAGRF,EAAAA,EAAAA,KAAA,SAAAE,SACGrC,EAAS0C,IAAKC,IACbL,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEd,QACPM,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEC,OACPT,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEE,YACPV,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEG,cACPX,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEI,cALAJ,EAAEf,cAazB,C","sources":["pages/CenterStudents.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { API_BASE_URL } from \"../config/api\";\n\nexport default function CenterStudents({ token, userId, onBack }) {\n  const [students, setStudents] = useState([]);\n  const [centerName, setCenterName] = useState(\"\");\n\n  useEffect(() => {\n    load();\n  }, [userId]);\n\n  async function load() {\n    let uid = userId;\n    if (!uid && token) {\n      try {\n        const payload = JSON.parse(atob(token.split(\".\")[1]));\n        uid = payload.sub;\n      } catch (e) {\n        // ignore\n      }\n    }\n    if (!uid) return;\n    try {\n      const ures = await fetch(`${API_BASE_URL}/users/${uid}`, {\n        headers: { Authorization: \"Bearer \" + token },\n      });\n      if (!ures.ok) throw new Error(\"Failed to load user\");\n      const user = await ures.json();\n      const cid = user.center?.id;\n      setCenterName(user.center?.name || \"\");\n      if (!cid) return setStudents([]);\n\n      const sres = await fetch(`${API_BASE_URL}/centers/${cid}/students`, {\n        headers: { Authorization: \"Bearer \" + token },\n      });\n      if (!sres.ok) return setStudents([]);\n      const all = await sres.json();\n      setStudents(all);\n    } catch (e) {\n      console.error(e);\n      setStudents([]);\n    }\n  }\n\n  return (\n    <div className=\"page\">\n      <div className=\"card\">\n        <button style={{ float: \"right\" }} onClick={onBack}>\n          Back\n        </button>\n        <h2>Center Students {centerName ? `- ${centerName}` : \"\"}</h2>\n        <table className=\"students\">\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Age</th>\n              <th>Category</th>\n              <th>Paid</th>\n              <th>Due</th>\n            </tr>\n          </thead>\n          <tbody>\n            {students.map((s) => (\n              <tr key={s.id}>\n                <td>{s.name}</td>\n                <td>{s.age}</td>\n                <td>{s.category}</td>\n                <td>{s.amountPaid}</td>\n                <td>{s.amountDue}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":["CenterStudents","_ref","token","userId","onBack","students","setStudents","useState","centerName","setCenterName","useEffect","async","uid","JSON","parse","atob","split","sub","e","_user$center","_user$center2","ures","fetch","concat","API_BASE_URL","headers","Authorization","ok","Error","user","json","cid","center","id","name","sres","all","console","error","load","_jsx","className","children","_jsxs","style","float","onClick","map","s","age","category","amountPaid","amountDue"],"sourceRoot":""}