"use strict";(self.webpackChunkmadestone_frontend=self.webpackChunkmadestone_frontend||[]).push([[218],{218:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var s=n(43),r=n(579);function a(e){let{token:t,userId:n,onBack:a}=e;const[c,d]=(0,s.useState)([]),[i,o]=(0,s.useState)("");return(0,s.useEffect)(()=>{!async function(){let e=n;if(!e&&t)try{e=JSON.parse(atob(t.split(".")[1])).sub}catch(a){}if(!e)return;try{var s,r;const n=await fetch("http://localhost:3001/users/".concat(e),{headers:{Authorization:"Bearer "+t}});if(!n.ok)throw new Error("Failed to load user");const a=await n.json(),c=null===(s=a.center)||void 0===s?void 0:s.id;if(o((null===(r=a.center)||void 0===r?void 0:r.name)||""),!c)return d([]);const i=await fetch("http://localhost:3001/centers/".concat(c,"/students"),{headers:{Authorization:"Bearer "+t}});if(!i.ok)return d([]);const h=await i.json();d(h)}catch(a){console.error(a),d([])}}()},[n]),(0,r.jsx)("div",{className:"page",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("button",{style:{float:"right"},onClick:a,children:"Back"}),(0,r.jsxs)("h2",{children:["Center Students ",i?"- ".concat(i):""]}),(0,r.jsxs)("table",{className:"students",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Age"}),(0,r.jsx)("th",{children:"Category"}),(0,r.jsx)("th",{children:"Paid"}),(0,r.jsx)("th",{children:"Due"})]})}),(0,r.jsx)("tbody",{children:c.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.age}),(0,r.jsx)("td",{children:e.category}),(0,r.jsx)("td",{children:e.amountPaid}),(0,r.jsx)("td",{children:e.amountDue})]},e.id))})]})]})})}}}]);
//# sourceMappingURL=218.2d1494de.chunk.js.map