{"version":3,"file":"static/js/218.2d1494de.chunk.js","mappings":"yKAEe,SAASA,EAAcC,GAA6B,IAA5B,MAAEC,EAAK,OAAEC,EAAM,OAAEC,GAAQH,EAC9D,MAAOI,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,KAClCC,EAAYC,IAAiBF,EAAAA,EAAAA,UAAS,IA0C7C,OAxCAG,EAAAA,EAAAA,WAAU,MAIVC,iBACE,IAAIC,EAAMT,EACV,IAAKS,GAAOV,EACV,IAEEU,EADgBC,KAAKC,MAAMC,KAAKb,EAAMc,MAAM,KAAK,KACnCC,GAChB,CAAE,MAAOC,GACP,CAGJ,IAAKN,EAAK,OACV,IAAK,IAADO,EAAAC,EACF,MAAMC,QAAaC,MAAM,+BAADC,OAAgCX,GAAO,CAC7DY,QAAS,CAAEC,cAAe,UAAYvB,KAExC,IAAKmB,EAAKK,GAAI,MAAM,IAAIC,MAAM,uBAC9B,MAAMC,QAAaP,EAAKQ,OAClBC,EAAiB,QAAdX,EAAGS,EAAKG,cAAM,IAAAZ,OAAA,EAAXA,EAAaa,GAEzB,GADAvB,GAAyB,QAAXW,EAAAQ,EAAKG,cAAM,IAAAX,OAAA,EAAXA,EAAaa,OAAQ,KAC9BH,EAAK,OAAOxB,EAAY,IAE7B,MAAM4B,QAAaZ,MAAM,iCAADC,OACWO,EAAG,aACpC,CACEN,QAAS,CAAEC,cAAe,UAAYvB,KAG1C,IAAKgC,EAAKR,GAAI,OAAOpB,EAAY,IACjC,MAAM6B,QAAYD,EAAKL,OACvBvB,EAAY6B,EACd,CAAE,MAAOjB,GACPkB,QAAQC,MAAMnB,GACdZ,EAAY,GACd,CACF,CArCEgC,IACC,CAACnC,KAuCFoC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMC,UACnBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,UAAQI,MAAO,CAAEC,MAAO,SAAWC,QAASzC,EAAOqC,SAAC,UAGpDC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,CAAI,mBAAiBjC,EAAU,KAAAe,OAAQf,GAAe,OACtDkC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,WAAUC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAAE,UACEC,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,UACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,SACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,cACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,UACJF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,cAGRF,EAAAA,EAAAA,KAAA,SAAAE,SACGpC,EAASyC,IAAKC,IACbL,EAAAA,EAAAA,MAAA,MAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEd,QACPM,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEC,OACPT,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEE,YACPV,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEG,cACPX,EAAAA,EAAAA,KAAA,MAAAE,SAAKM,EAAEI,cALAJ,EAAEf,cAazB,C","sources":["pages/CenterStudents.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nexport default function CenterStudents({ token, userId, onBack }) {\r\n  const [students, setStudents] = useState([]);\r\n  const [centerName, setCenterName] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    load();\r\n  }, [userId]);\r\n\r\n  async function load() {\r\n    let uid = userId;\r\n    if (!uid && token) {\r\n      try {\r\n        const payload = JSON.parse(atob(token.split(\".\")[1]));\r\n        uid = payload.sub;\r\n      } catch (e) {\r\n        // ignore\r\n      }\r\n    }\r\n    if (!uid) return;\r\n    try {\r\n      const ures = await fetch(`http://localhost:3001/users/${uid}`, {\r\n        headers: { Authorization: \"Bearer \" + token },\r\n      });\r\n      if (!ures.ok) throw new Error(\"Failed to load user\");\r\n      const user = await ures.json();\r\n      const cid = user.center?.id;\r\n      setCenterName(user.center?.name || \"\");\r\n      if (!cid) return setStudents([]);\r\n\r\n      const sres = await fetch(\r\n        `http://localhost:3001/centers/${cid}/students`,\r\n        {\r\n          headers: { Authorization: \"Bearer \" + token },\r\n        }\r\n      );\r\n      if (!sres.ok) return setStudents([]);\r\n      const all = await sres.json();\r\n      setStudents(all);\r\n    } catch (e) {\r\n      console.error(e);\r\n      setStudents([]);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"card\">\r\n        <button style={{ float: \"right\" }} onClick={onBack}>\r\n          Back\r\n        </button>\r\n        <h2>Center Students {centerName ? `- ${centerName}` : \"\"}</h2>\r\n        <table className=\"students\">\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Age</th>\r\n              <th>Category</th>\r\n              <th>Paid</th>\r\n              <th>Due</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {students.map((s) => (\r\n              <tr key={s.id}>\r\n                <td>{s.name}</td>\r\n                <td>{s.age}</td>\r\n                <td>{s.category}</td>\r\n                <td>{s.amountPaid}</td>\r\n                <td>{s.amountDue}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CenterStudents","_ref","token","userId","onBack","students","setStudents","useState","centerName","setCenterName","useEffect","async","uid","JSON","parse","atob","split","sub","e","_user$center","_user$center2","ures","fetch","concat","headers","Authorization","ok","Error","user","json","cid","center","id","name","sres","all","console","error","load","_jsx","className","children","_jsxs","style","float","onClick","map","s","age","category","amountPaid","amountDue"],"sourceRoot":""}